{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Section Listing                              │
   │ Content listing with cards and responsive pagination    │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/section-listing.njk" import renderSectionListing %}
    {{ renderSectionListing({ 
      name: "adventure_quests",
      datas: organisms["section-listings"],
      headings: atoms.headings,
      cards: molecules.cards,
      paginations: molecules.paginations,
      buttons: atoms.buttons,
      icons: atoms.icons,
      selects: atoms.selects,
      images: atoms.images
    }) }}
  
  Props:
    - options.name (string): Section identifier
    - options.datas (object): Section configurations
    - options.headings (object): Headings data source
    - options.cards (object): Cards data source
    - options.paginations (object): Paginations data source
    - options.buttons (object): Buttons data source
    - options.icons (object): Icons data source
    - options.selects (object): Selects data source
    - options.images (object): Images data source
    - options.currentPage (number): Current page number
    - options.totalPages (number): Total pages count
    - options.itemsPerPage (number): Items per page
    - options.totalItems (number): Total items count
    - options.class (string): Additional CSS classes
  
  Features:
    - Variant-based styling system
    - Optional section heading
    - Dynamic card grid rendering
    - Responsive pagination (mobile navigation-only, desktop full)
    - Auto-selects first listing if name not found
  
  @created 2025-01-15
#}

{% from "01-atoms/heading.njk" import renderHeading %}
{% from "02-molecules/card.njk" import renderCard %}
{% from "02-molecules/pagination.njk" import renderPagination %}

{% macro renderSectionListing(options) %}
  {% if options.datas %}
    {% set globalStyle = options.datas.globalStyle %}
    
    {% set sectionListingData = null %}
    {% if options.name %}
      {% for listingSet in options.datas.section_listings %}
        {% if listingSet.name == options.name %}
          {% set sectionListingData = listingSet %}
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if not sectionListingData %}
      {% set sectionListingData = options.datas.section_listings[0] %}
    {% endif %}
    
    {% set variant = options.datas.variants[sectionListingData.style | default('default')] %}
    {% set titleContainerStyle = options.datas.titleContainerStyle[sectionListingData.titleContainer | default('default')] %}
    {% set cardsContainerStyle = options.datas.cardsContainerStyle.default %}
    {% set paginationContainerStyle = options.datas.paginationContainerStyle.default %}
    {% set mobilePaginationStyle = options.datas.mobilePaginationStyle.default %}
    {% set desktopPaginationStyle = options.datas.desktopPaginationStyle.default %}
    
    <section class="{{ globalStyle }} {{ variant }} {{ options.class | default('') }}">
      <div class="">
        <!-- Title Section -->
        {% if sectionListingData.heading %}
          <div class="{{ titleContainerStyle }}">
            {{ renderHeading({ 
              name: sectionListingData.heading.name,
              datas: options.headings,
              text: sectionListingData.heading.text
            }) }}
          </div>
        {% endif %}
        
        <!-- Cards Section -->
        {% if sectionListingData.cards and sectionListingData.cards | length > 0 %}
          <div class="{{ cardsContainerStyle }}">
            {% for card in sectionListingData.cards %}
              {{ renderCard({ 
                name: card.name,
                variant: card.style | default('default'),
                datas: options.cards,
                images: options.images,
                headings: options.headings,
                buttons: options.buttons
              }) }}
            {% endfor %}
          </div>
        {% endif %}
        
        <!-- Pagination Section -->
        {% if sectionListingData.pagination %}
          <div class="{{ paginationContainerStyle }}">
            <!-- Mobile Pagination (only navigation) -->
            <div class="{{ mobilePaginationStyle }}">
              {{ renderPagination({ 
                name: sectionListingData.pagination.mobile,
                datas: options.paginations,
                buttonData: options.buttons,
                icons: options.icons,
                currentPage: options.currentPage | default(1),
                totalPages: options.totalPages | default(10)
              }) }}
            </div>
            
            <!-- Desktop Pagination (complete - with select, navigation, counter) -->
            <div class="{{ desktopPaginationStyle }}">
              {{ renderPagination({ 
                name: "pager",
                datas: options.paginations,
                buttonData: options.buttons,
                icons: options.icons,
                selectData: options.selects,
                currentPage: options.currentPage | default(1),
                totalPages: options.totalPages | default(10),
                itemsPerPage: options.itemsPerPage | default(10),
                totalItems: options.totalItems | default(100)
              }) }}
            </div>
          </div>
        {% endif %}
      </div>
    </section>
  {% else %}
    <span class="">Section listing data not found</span>
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}