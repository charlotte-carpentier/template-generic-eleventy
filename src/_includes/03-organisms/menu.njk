{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Menu                                         │
   │ Navigation menu with heading and secondary navigation   │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Menu identifier
    - options.datas (array): Menu configuration data
    - options.headingDatas (array): Heading atom data
    - options.navSecondaryDatas (array): Navigation secondary organism data
    - options.linkDatas (array): Link atom data

  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/menu.njk" import renderMenu %}

    {{ renderMenu({
        name: "demoMenu1",
        datas: organisms.menu.menus,
        headingDatas: atoms.heading.headings,
        navSecondaryDatas: organisms["navigation-secondary"].navSecondary,
        linkDatas: atoms.link.links
    }) }}

  @created 2025-01-15
#}

{% macro renderMenu(options) %}
  {# Import sub-components #}
  {% from "01-atoms/heading.njk" import renderHeading %}
  {% from "03-organisms/navigation-secondary.njk" import renderNavigationSecondary %}

  {# Validate required props #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find menu using universal filter - DRY principle, performance optimized #}
    {% set menuData = options.datas | findByName(options.name) %}

    {# Render menu or error message #}
    {% if not menuData %}
      <span class="error" role="alert">Menu not found: {{ options.name }}</span>
    {% else %}
      {# Render nav element - Semantic HTML best practice #}
      <nav
        aria-label="{{ menuData.ariaLabel }}"
        data-menu-name="{{ menuData.name }}"
        data-menu-type="menu"
      >

        {# Menu items - Column layout pattern #}
        <div data-menu-columns>
          {% for item in menuData.items %}
            <div data-menu-column>

              {# Column heading - DRY: Use renderHeading atom (not direct HTML) #}
              {# Source: The Pragmatic Programmer - Don't Repeat Yourself principle #}
              {{ renderHeading({
                  name: item.headingName,
                  datas: options.headingDatas
              }) }}

              {# Column navigation - Navigation secondary organism #}
              {{ renderNavigationSecondary({
                  name: item.navSecondaryName,
                  datas: options.navSecondaryDatas,
                  linkDatas: options.linkDatas
              }) }}

            </div>
          {% endfor %}
        </div>

      </nav>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
