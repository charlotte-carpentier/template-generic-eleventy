{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Section Contact                              │
   │ Contact section with form and nested section            │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Section identifier
    - options.datas (array): Section configuration data
    - options.formDatas (array): Form organism/molecule data
    - options.sectionAboutDatas (array): Section about organism data
    - options.buttonDatas (array): Button atom data
    - options.headingDatas (array): Heading atom data (for nested section-about)

  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/section-contact.njk" import renderSectionContact %}

    {{ renderSectionContact({
        name: "demoSectC1",
        datas: organisms["section-contact"].sectContacts,
        formDatas: molecules["list-form"]["list-forms"],
        sectionAboutDatas: organisms["section-about"].sectAbouts,
        buttonDatas: atoms.button.buttons,
        headingDatas: atoms.heading.headings
    }) }}

  @created 2025-01-15
#}

{% macro renderSectionContact(options) %}
  {# Import sub-components #}
  {% from "02-molecules/list-form.njk" import renderListForm %}
  {% from "03-organisms/section-about.njk" import renderSectionAbout %}
  {% from "01-atoms/button.njk" import renderButton %}

  {# Validate required props #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find section using universal filter #}
    {% set sectionData = options.datas | findByName(options.name) %}

    {# Render section or error message #}
    {% if not sectionData %}
      <span class="error" role="alert">Section not found: {{ options.name }}</span>
    {% else %}
      {# Render section element - Two-column layout pattern #}
      <section 
        aria-label="{{ sectionData.ariaLabel }}"
        data-section-name="{{ sectionData.name }}"
        data-section-type="section-contact"
      >
        
        <div data-section-container>
          
          {# Left column - Contact form #}
          <div data-section-column="left">
            
            {% if sectionData.leftForm %}
              {# Form with submit button #}
              {% set submitButtonHtml %}
                {{ renderButton({
                    name: sectionData.buttonName,
                    datas: options.buttonDatas,
                    type: "submit"
                }) }}
              {% endset %}
              
              {{ renderListForm({
                  name: sectionData.leftForm,
                  datas: options.formDatas,
                  submitButton: submitButtonHtml | safe
              }) }}
            {% endif %}
            
          </div>
          
          {# Right column - Nested section-about organism #}
          <div data-section-column="right">
            
            {% if sectionData.rightSection %}
              {{ renderSectionAbout({
                  name: sectionData.rightSection,
                  datas: options.sectionAboutDatas,
                  headingDatas: options.headingDatas,
                  buttonDatas: options.buttonDatas
              }) }}
            {% endif %}
            
          </div>
          
        </div>
        
      </section>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}