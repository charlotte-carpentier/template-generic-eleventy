{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Section About                                │
   │ About section with heading hierarchy and CTAs           │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Section identifier
    - options.datas (array): Section configuration data
    - options.headingDatas (array): Heading atom data
    - options.buttonDatas (array): Button atom data

  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/section-about.njk" import renderSectionAbout %}

    {{ renderSectionAbout({
        name: "demoSectAb1",
        datas: organisms["section-about"].sectAbouts,
        headingDatas: atoms.heading.headings,
        buttonDatas: atoms.button.buttons
    }) }}

  @created 2025-01-15
#}

{% macro renderSectionAbout(options) %}
  {# Import sub-components #}
  {% from "01-atoms/heading.njk" import renderHeading %}
  {% from "01-atoms/button.njk" import renderButton %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find section using universal filter #}
    {% set sectionData = options.datas | findByName(options.name) %}

    {# Render section or error message #}
    {% if not sectionData %}
      <span class="error" role="alert">Section not found: {{ options.name }}</span>
    {% else %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        2. Compute Final Values
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {% set sectionName = sectionData.name | default(options.name) %}
      {% set superHeadingName = sectionData.superHeadingName | default('') %}
      {% set headingName = sectionData.headingName | default('') %}
      {% set content = sectionData.content | default('') %}
      {% set primaryButtonName = sectionData.primaryButtonName | default('') %}
      {% set secondaryButtonName = sectionData.secondaryButtonName | default('') %}
      {% set ariaLabel = sectionData.ariaLabel | default('About section') %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
        Index:
        3.1 Section Wrapper Classes
        3.2 Grid Wrapper Classes
        3.3 Left Column Classes
        3.4 Right Column Classes
        3.5 Super Heading Wrapper Classes
        3.6 Main Heading Wrapper Classes
        3.7 Content Wrapper Classes
        3.8 Buttons Wrapper Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# --------------------------
          3.1 Section Wrapper Classes
          Description: Layout, Spacing
        --------------------------#}
      {% set sectionClasses = "flex flex-col px-[var(--spacing-inset-medium)] py-[var(--spacing-inset-large)] md:px-[var(--spacing-inset-xlarge)] md:py-[var(--spacing-inset-xxlarge)]" %}

      {# --------------------------
          3.2 Grid Wrapper Classes
          Description: Layout responsive grid, Spacing
        --------------------------#}
      {% set gridClasses = "flex flex-col gap-[var(--spacing-stack-large)] md:grid md:grid-cols-2 md:gap-[var(--spacing-inline-xxlarge)]" %}

      {# --------------------------
          3.3 Left Column Classes
          Description: Layout, Spacing base with gap
      --------------------------#}
      {% set leftColClasses = "flex flex-col gap-[var(--spacing-stack-medium)] order-2 md:order-1" %}

      {# --------------------------
          3.4 Right Column Classes
          Description: Layout, Order mobile
        --------------------------#}
      {% set rightColClasses = "flex order-1 md:order-2" %}

      {# --------------------------
          3.5 Super Heading Wrapper Classes
          Description: Layout
        --------------------------#}
      {% set superHeadingClasses = "flex" %}

      {# --------------------------
          3.6 Main Heading Wrapper Classes
          Description: Layout, Typography override serif
      --------------------------#}
      {% set mainHeadingClasses = "flex [&_h1]:typography-h1-serif [&_h2]:typography-h2-serif [&_h3]:typography-h3-serif" %}

      {# --------------------------
          3.7 Content Wrapper Classes
          Description: Typography, Colors, Spacing bottom override
      --------------------------#}
      {% set contentClasses = "typography-body-regular text-[var(--color-global-default)] mb-[var(--spacing-stack-large)]" %}

      {# --------------------------
          3.8 Buttons Wrapper Classes
          Description: Layout horizontal, Spacing
        --------------------------#}
      {% set buttonsClasses = "flex gap-[var(--spacing-inline-large)]" %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        4. Render HTML
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      <section
        class="{{ sectionClasses }}"
        aria-label="{{ ariaLabel }}"
        data-section-name="{{ sectionName }}"
        data-section-type="section-about"
      >

        <div
          class="{{ gridClasses }}"
          data-section-container
        >

          {# Left column - Super heading, content, buttons #}
          <div
            class="{{ leftColClasses }}"
            data-section-left-column
          >

            {# Super heading #}
            {% if superHeadingName %}
              <div
                class="{{ superHeadingClasses }}"
                data-section-super-heading
              >
                {{ renderHeading({
                    name: superHeadingName,
                    datas: options.headingDatas
                }) }}
              </div>
            {% endif %}

            {# Content text #}
            {% if content %}
              <div
                class="{{ contentClasses }}"
                data-section-content
              >
                <p>{{ content }}</p>
              </div>
            {% endif %}

            {# Call-to-action buttons #}
            {% if primaryButtonName or secondaryButtonName %}
              <div
                class="{{ buttonsClasses }}"
                data-section-buttons
              >

                {# Primary button #}
                {% if primaryButtonName %}
                  {{ renderButton({
                      name: primaryButtonName,
                      datas: options.buttonDatas
                  }) }}
                {% endif %}

                {# Secondary button #}
                {% if secondaryButtonName %}
                  {{ renderButton({
                      name: secondaryButtonName,
                      datas: options.buttonDatas
                  }) }}
                {% endif %}

              </div>
            {% endif %}

          </div>

          {# Right column - Main heading #}
          <div
            class="{{ rightColClasses }}"
            data-section-right-column
          >

            {# Main heading #}
            {% if headingName %}
              <div
                class="{{ mainHeadingClasses }}"
                data-section-heading
              >
                {{ renderHeading({
                    name: headingName,
                    datas: options.headingDatas
                }) }}
              </div>
            {% endif %}

          </div>

        </div>

      </section>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
