{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Section About                                │
   │ Responsive about section with dual layout               │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/section-about.njk" import renderSectionAbout %}
    {{ renderSectionAbout({ 
      name: "about_us", 
      datas: organisms["section-abouts"], 
      headings: atoms.headings, 
      buttons: atoms.buttons 
    }) }}
  
  Props:
    - options.name (string): Section identifier
    - options.datas (object): Section configurations
    - options.headings (object): Headings data source
    - options.buttons (object): Buttons data source
    - options.class (string): Additional CSS classes
  
  Features:
    - Responsive layout (mobile column, desktop two-column)
    - Variant-based styling system
    - Heading hierarchy (super heading + main heading)
    - Primary and secondary button support
    - Optional image content
    - Auto-selects first section if name not found
  
  @created 2025-01-15
#}

{% from "01-atoms/heading.njk" import renderHeading %}
{% from "01-atoms/button.njk" import renderButton %}

{% macro renderSectionAbout(options) %}
  {% if options.datas %}
    {% set globalStyle = options.datas.globalStyle %}
    {% set sectionStyles = options.datas.sectionStyles %}
    
    {% set sectionData = null %}
    {% if options.name %}
      {% for section in options.datas.sections %}
        {% if section.name == options.name %}
          {% set sectionData = section %}
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if not sectionData %}
      {% set sectionData = options.datas.sections[0] %}
    {% endif %}
    
    {% set variant = options.datas.variants[sectionData.variant] | default(options.datas.variants.default) %}
    
    <section class="{{ globalStyle }} {{ variant }} {{ options.class | default('') }}">
      <div class="{{ sectionStyles.container }}">
        {# Mobile layout (flex column) #}
        <div class="">
          {# Heading first in mobile #}
          {% if sectionData.heading and options.headings %}
            {{ renderHeading({
              name: sectionData.heading,
              datas: options.headings
            }) }}
          {% endif %}
          
          {# Super Heading second #}
          {% if sectionData.superHeading and options.headings %}
            {{ renderHeading({
              name: sectionData.superHeading,
              datas: options.headings
            }) }}
          {% endif %}
          
          {# Content #}
          {% if sectionData.content %}
            <div class="">
              {{ sectionData.content }}
            </div>
          {% endif %}
          
          {# Buttons #}
          {% if (sectionData.primaryButton or sectionData.secondaryButton) and options.buttons %}
            <div class="{{ sectionStyles.buttonContainer }}">
              {% if sectionData.primaryButton %}
                {{ renderButton({
                  name: sectionData.primaryButton,
                  datas: options.buttons,
                  class: ''
                }) }}
              {% endif %}
              
              {% if sectionData.secondaryButton %}
                {{ renderButton({
                  name: sectionData.secondaryButton,
                  datas: options.buttons
                }) }}
              {% endif %}
            </div>
          {% endif %}
        </div>
        
        {# Desktop layout (two columns) #}
        <div class="{{ sectionStyles.contentWrapper }}">
          {# Left column: Super Heading, content and buttons #}
          <div class="{{ sectionStyles.textContent }}">
            {# Super Heading #}
            {% if sectionData.superHeading and options.headings %}
              {{ renderHeading({
                name: sectionData.superHeading,
                datas: options.headings
              }) }}
            {% endif %}
            
            {# Content #}
            {% if sectionData.content %}
              <div class="">
                {{ sectionData.content }}
              </div>
            {% endif %}
            
            {# Buttons #}
            {% if (sectionData.primaryButton or sectionData.secondaryButton) and options.buttons %}
              <div class="{{ sectionStyles.buttonContainer }}">
                {% if sectionData.primaryButton %}
                  {{ renderButton({
                    name: sectionData.primaryButton,
                    datas: options.buttons,
                    class: ''
                  }) }}
                {% endif %}
                
                {% if sectionData.secondaryButton %}
                  {{ renderButton({
                    name: sectionData.secondaryButton,
                    datas: options.buttons
                  }) }}
                {% endif %}
              </div>
            {% endif %}
          </div>
          
          {# Right column: Main heading #}
          <div class="{{ sectionStyles.mediaContent }}">
            {# Main Heading #}
            {% if sectionData.heading and options.headings %}
              {{ renderHeading({
                name: sectionData.heading,
                datas: options.headings,
                class: ""
              }) }}
            {% endif %}
            
            {# Optional image content #}
            {% if sectionData.image %}
              <img src="{{ sectionData.image }}" alt="{{ sectionData.imageAlt | default('') }}" class="w-full h-auto mt-6">
            {% endif %}
          </div>
        </div>
      </div>
    </section>
  {% else %}
    <span class="">Section About data not found</span>
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}