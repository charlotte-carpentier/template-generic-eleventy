{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Section About                                │
   │ About section with heading hierarchy and CTAs           │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Section identifier
    - options.datas (array): Section configuration data
    - options.headingDatas (array): Heading atom data
    - options.buttonDatas (array): Button atom data
    - options.iconDatas (array): Icon atom data (optional, required if buttons have icons)
    - options.tooltipDatas (array): Tooltip atom data (optional, required if buttons have tooltips)

  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/section-about.njk" import renderSectionAbout %}

    {{ renderSectionAbout({
        name: "demoSectAb1",
        datas: organisms["section-about"].sectAbouts,
        headingDatas: atoms.heading.headings,
        buttonDatas: atoms.button.buttons
    }) }}

  @created 2025-01-15
#}

{% macro renderSectionAbout(options) %}
  {# Import sub-components #}
  {% from "01-atoms/heading.njk" import renderHeading %}
  {% from "01-atoms/button.njk" import renderButton %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find section using universal filter #}
    {% set sectionData = options.datas | findByName(options.name) %}

    {# Render section or error message #}
    {% if not sectionData %}
      <span class="error" role="alert">Section not found: {{ options.name }}</span>
    {% else %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        2. Compute Final Values
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {% set sectionName = sectionData.name | default(options.name) %}
      {% set headingName = sectionData.headingName | default('') %}
      {% set subheadingName = sectionData.subheadingName | default('') %}
      {% set content = sectionData.content | default('') %}
      {% set primaryButtonName = sectionData.primaryButtonName | default('') %}
      {% set secondaryButtonName = sectionData.secondaryButtonName | default('') %}
      {% set ariaLabel = sectionData.ariaLabel | default('About section') %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
        Index:
        3.1 Wrapper Classes
        3.2 Layout Classes
        3.3 Left Column Classes
        3.4 Right Column Classes
        3.5 Heading Wrapper Classes
        3.6 Main Heading Wrapper Classes
        3.7 Content Wrapper Classes
        3.8 Buttons Wrapper Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# --------------------------
          3.1 Wrapper Classes
          Description: Layout, Spacing
        --------------------------#}
      {% set sectionClasses = "flex flex-col spacing-section-fluid-x spacing-section-fluid-y" %}

      {# --------------------------
          3.2 Layout Classes
          Description: Layout responsive grid, Spacing
        --------------------------#}
      {% set gridClasses = "flex flex-col gap-[var(--spacing-ui-comfortable)] md:grid md:grid-cols-2 md:gap-[var(--spacing-ui-maximal)] lg:gap-[var(--spacing-section-minimal)]" %}

      {# --------------------------
          3.3 Left Column Classes
          Description: Layout, Spacing base with gap
      --------------------------#}
      {% set leftColClasses = "flex flex-col gap-[var(--spacing-ui-default)] order-2 md:order-1" %}

      {# --------------------------
          3.4 Right Column Classes
          Description: Layout, Order mobile
        --------------------------#}
      {% set rightColClasses = "flex order-1 md:order-2" %}

      {# --------------------------
          3.5 Heading Wrapper Classes
          Description: Layout
        --------------------------#}
      {% set headingClasses = "flex [&_h2]:font-heading-serif" %}

      {# --------------------------
          3.6 Subheading Wrapper Classes
          Description: Layout, Typography override serif
      --------------------------#}
      {% set subheadingClasses = "flex [&_h3]:font-heading-bold-serif [&_h3]:text-fluid-h1" %}

      {# --------------------------
          3.7 Content Wrapper Classes
          Description: Typography, Colors, Spacing bottom override
      --------------------------#}
      {% set contentClasses = "font-body text-body text-[var(--color-global-default)] prose-content" %}

      {# --------------------------
          3.8 Buttons Wrapper Classes
          Description: Layout horizontal, Spacing
        --------------------------#}
      {% set buttonsClasses = "flex gap-[var(--spacing-ui-default)] md:gap-[var(--spacing-ui-comfortable)]" %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        4. Render HTML
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      <section
        class="{{ sectionClasses }}"
        aria-label="{{ ariaLabel }}"
        data-section-name="{{ sectionName }}"
        data-section-type="section-about"
      >

        <div
          class="{{ gridClasses }}"
          data-section-container
        >

          {# Left column - Heading, content, buttons #}
          <div
            class="{{ leftColClasses }}"
            data-section-left-column
          >

            {# Heading #}
            {% if headingName %}
              <div
                class="{{ headingClasses }}"
                data-section-heading
              >
                {{ renderHeading({
                    name: headingName,
                    datas: options.headingDatas
                }) }}
              </div>
            {% endif %}

            {# Content text #}
            {% if content %}
              <div
                class="{{ contentClasses }}"
                data-section-content
              >
                <p>{{ content }}</p>
              </div>
            {% endif %}

            {# Call-to-action buttons #}
            {% if primaryButtonName or secondaryButtonName %}
              <div
                class="{{ buttonsClasses }}"
                data-section-buttons
              >

                {# Primary button #}
                {% if primaryButtonName %}
                  {{ renderButton({
                      name: primaryButtonName,
                      datas: options.buttonDatas,
                      iconDatas: options.iconDatas,
                      tooltipDatas: options.tooltipDatas
                  }) }}
                {% endif %}

                {# Secondary button #}
                {% if secondaryButtonName %}
                  {{ renderButton({
                      name: secondaryButtonName,
                      datas: options.buttonDatas,
                      iconDatas: options.iconDatas,
                      tooltipDatas: options.tooltipDatas
                  }) }}
                {% endif %}

              </div>
            {% endif %}

          </div>

          {# Right column - Subheading #}
          <div
            class="{{ rightColClasses }}"
            data-section-right-column
          >

            {# Subheading #}
            {% if subheadingName %}
              <div
                class="{{ subheadingClasses }}"
                data-section-subheading
              >
                {{ renderHeading({
                    name: subheadingName,
                    datas: options.headingDatas
                }) }}
              </div>
            {% endif %}

          </div>

        </div>

      </section>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2026
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
