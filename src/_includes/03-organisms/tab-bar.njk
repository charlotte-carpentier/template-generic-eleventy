{# ============================================================
   @ORGANISM - TAB-SECTIONS
   - Main sections container with navigation and CSS :target system
   - Enhanced accessibility with ARIA roles and live regions
============================================================ #}

{% macro renderTabSections(option) %}
  {% from "03-organisms/section-portfolio.njk" import renderSectionPortfolio %}
  {% from "03-organisms/section-timeline.njk" import renderSectionTimeline %}
  {% from "03-organisms/section-contact.njk" import renderSectionContact %}
  {% from "02-molecules/tab-menu.njk" import renderTabMenu %}

  {% if not option.datas %}
    <span>Error: No tab-sections configuration provided</span>
  {% else %}
    {% set tabSectionsConfig = option.datas %}
    {% set tabSectionsName = option.name %}
    
    {% set tabSectionsData = null %}
    {% for tabSections in tabSectionsConfig %}
      {% if tabSections.name == tabSectionsName %}
        {% set tabSectionsData = tabSections %}
      {% endif %}
    {% endfor %}

    {% if not tabSectionsData %}
      <span>Tab-sections not found: {{ tabSectionsName }}</span>
    {% else %}
      <div id="main-tab-sections">
        
        {# Desktop/tablet navigation #}
        <div role="tablist" aria-label="Navigation sections">
          {{ renderTabMenu({ 
              name: tabSectionsData.navigation.menu,
              datas: option.tabMenuDatas,
              linkDatas: option.linkDatas
          }) }}
        </div>
        
        {# Main container #}
        <div>
          
          {# Content area with borders #}
          <div style="overflow-y: auto;">
            
            {# Gradient lines #}
            <div>
              <div></div>
              <div></div>
            </div>
            
            {# Sections with :target navigation #}
            <div>
              
              {# Portfolio - default #}
              <div id="portfolio" data-default="true" role="tabpanel" tabindex="0" aria-labelledby="tab-portfolio">
                {{ renderSectionPortfolio({ 
                    name: "charlotte_missions",
                    datas: option.portfolioDatas,
                    typographyDatas: option.typographyDatas,
                    contentBlockDatas: option.contentBlockDatas,
                    imageDatas: option.imageDatas,
                    buttonDatas: option.buttonDatas,
                    linkDatas: option.linkDatas,
                    class: "tab-section-content"
                }) }}
              </div>
              
              {# Profile #}
              <div id="profile" role="tabpanel" tabindex="0" aria-labelledby="tab-profile">
                {{ renderSectionTimeline({ 
                    name: "charlotte_profile",
                    datas: option.timelineDatas,
                    typographyDatas: option.typographyDatas,
                    contentBlockDatas: option.contentBlockDatas,
                    progressBarDatas: option.progressBarDatas,
                    imageDatas: option.imageDatas,
                    buttonDatas: option.buttonDatas,
                    linkDatas: option.linkDatas,
                    iconDatas: option.iconDatas,
                    class: "tab-section-content"
                }) }}
              </div>
              
              {# Journey #}
              <div id="journey" role="tabpanel" tabindex="0" aria-labelledby="tab-journey">
                {{ renderSectionTimeline({ 
                    name: "charlotte_journey",
                    datas: option.timelineDatas,
                    typographyDatas: option.typographyDatas,
                    contentBlockDatas: option.contentBlockDatas,
                    progressBarDatas: option.progressBarDatas,
                    imageDatas: option.imageDatas,
                    buttonDatas: option.buttonDatas,
                    linkDatas: option.linkDatas,
                    iconDatas: option.iconDatas,
                    class: "tab-section-content"
                }) }}
              </div>
              
              {# Knowledge #}
              <div id="knowledge" role="tabpanel" tabindex="0" aria-labelledby="tab-knowledge">
                {{ renderSectionTimeline({ 
                    name: "charlotte_knowledge",
                    datas: option.timelineDatas,
                    typographyDatas: option.typographyDatas,
                    contentBlockDatas: option.contentBlockDatas,
                    progressBarDatas: option.progressBarDatas,
                    imageDatas: option.imageDatas,
                    buttonDatas: option.buttonDatas,
                    linkDatas: option.linkDatas,
                    iconDatas: option.iconDatas,
                    class: "tab-section-content"
                }) }}
              </div>
              
              {# Contact #}
              <div id="contact" role="tabpanel" tabindex="0" aria-labelledby="tab-contact">
                {{ renderSectionContact({ 
                    name: "charlotte_contact",
                    datas: option.contactDatas,
                    typographyDatas: option.typographyDatas,
                    contactBlockDatas: option.contactBlockDatas,
                    listFormDatas: option.listFormDatas,
                    iconDatas: option.iconDatas,
                    radioDatas: option.radioDatas,
                    inputDatas: option.inputDatas,
                    buttonDatas: option.buttonDatas,
                    linkDatas: option.linkDatas,
                    class: "tab-section-content"
                }) }}
              </div>
              
              {# Thanks section #}
              <div id="message" role="tabpanel" tabindex="0" aria-labelledby="tab-message">
                {{ renderSectionTimeline({ 
                    name: "charlotte_thanks",
                    datas: option.timelineDatas,
                    typographyDatas: option.typographyDatas,
                    contentBlockDatas: option.contentBlockDatas,
                    progressBarDatas: option.progressBarDatas,
                    imageDatas: option.imageDatas,
                    buttonDatas: option.buttonDatas,
                    linkDatas: option.linkDatas,
                    iconDatas: option.iconDatas,
                    class: "tab-section-content"
                }) }}
              </div>
              
              {# Legal #}
              <div id="legal" role="tabpanel" tabindex="0" aria-labelledby="tab-legal">
                {{ renderSectionTimeline({ 
                    name: "",
                    datas: option.timelineDatas,
                    typographyDatas: option.typographyDatas,
                    contentBlockDatas: option.contentBlockDatas,
                    progressBarDatas: option.progressBarDatas,
                    imageDatas: option.imageDatas,
                    buttonDatas: option.buttonDatas,
                    linkDatas: option.linkDatas,
                    iconDatas: option.iconDatas,
                    class: ""
                }) }}
              </div>
              
            </div>
          </div>
          
          {# Custom scroll cursor - desktop only #}
          <div>
            <div>
              <div id="scroll-cursor-thumb"></div>
            </div>
          </div>
          
        </div>
      </div>
    {% endif %}
  {% endif %}
{% endmacro %}

{# ============================================================
   Summon HAT Components Wisely
-----------------------------------------------------------
1. Import the macro at the top of your page
{% from "03-organisms/tab-sections.njk" import renderTabSections %}

2. Call the tab-sections
{{ renderTabSections({ 
    name: "charlotte_main",
    datas: organisms["tab-sections"]["tab-sections"],
    tabMenuDatas: molecules["tab-menu"].tab_menus,
    linkDatas: atoms.link.links,
    portfolioDatas: organisms["section-portfolio"].sections,
    timelineDatas: organisms["section-timeline"].sections,
    contactDatas: organisms["section-contact"].sections,
    typographyDatas: atoms.typography.texts,
    contentBlockDatas: molecules["content-block"]["content-blocks"],
    contactBlockDatas: molecules["contact-block"].contact_blocks,
    listFormDatas: molecules["list-form"]["list-forms"],
    progressBarDatas: molecules["progress-bar"]["progress-bars"],
    imageDatas: atoms.image.images,
    iconDatas: atoms.icon.icons,
    radioDatas: atoms.radio.radios,
    inputDatas: atoms.input.inputs,
    buttonDatas: atoms.button.buttons
}) }}

May your bugs be forever exiled to the shadow realm.
============================================================ #}