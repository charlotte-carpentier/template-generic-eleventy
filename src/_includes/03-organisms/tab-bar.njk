{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Tab Bar                                      │
   │ Navigation tab bar with active state management         │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Tab bar identifier
    - options.datas (array): Tab bar configuration data
    - options.linkDatas (array): Link atom data

  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/tab-bar.njk" import renderTabBar %}

    {{ renderTabBar({
        name: "demoTabBar1",
        datas: organisms["tab-bar"].tabBars,
        linkDatas: atoms.link.links
    }) }}

  @created 2025-01-15
#}

{% macro renderTabBar(options) %}
  {# Import sub-component #}
  {% from "01-atoms/link.njk" import renderLink %}

  {# Validate required props #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find tab bar using universal filter - DRY principle, performance optimized #}
    {% set tabBarData = options.datas | findByName(options.name) %}

    {# Render tab bar or error message #}
    {% if not tabBarData %}
      <span class="error" role="alert">Tab bar not found: {{ options.name }}</span>
    {% else %}
      {# Render nav element - WCAG 2.2 AA ARIA Tabs pattern #}
      {# Source: https://www.w3.org/WAI/ARIA/apg/patterns/tabs/ #}
      <nav
        role="tablist"
        aria-label="{{ tabBarData.ariaLabel }}"
        data-tabbar-name="{{ tabBarData.name }}"
        data-tabbar-type="tab-bar"
      >
        <ul data-tabbar-list>
          {% for item in tabBarData.items %}
            <li
              role="presentation"
              data-tabbar-item
            >
              {# Tab link with ARIA role and active state #}
              {# WCAG: aria-selected indicates current tab #}
              {{ renderLink({
                  name: item.linkName,
                  datas: options.linkDatas,
                  active: item.active,
                  role: "tab",
                  ariaSelected: item.active
              }) }}
            </li>
          {% endfor %}
        </ul>
      </nav>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
