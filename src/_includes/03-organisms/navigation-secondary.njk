{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Navigation Secondary                         │
   │ Secondary navigation with link integration              │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Navigation identifier
    - options.datas (array): Navigation configuration data
    - options.linkDatas (array): Link atom data
    - options.iconDatas (array): Icon atom data (optional, required if links have icons)

  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/navigation-secondary.njk" import renderNavigationSecondary %}

    {{ renderNavigationSecondary({
        name: "demoNavSec1",
        datas: organisms["navigation-secondary"].navSecondary,
        linkDatas: atoms.link.links,
        iconDatas: atoms.icon.icons
    }) }}

  @created 2025-01-15
#}

{% macro renderNavigationSecondary(options) %}
  {# Import sub-component #}
  {% from "01-atoms/link.njk" import renderLink %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find navigation using universal filter #}
    {% set navData = options.datas | findByName(options.name) %}

    {# Render navigation or error message #}
    {% if not navData %}
      <span class="error" role="alert">Navigation not found: {{ options.name }}</span>
    {% else %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        2. Compute Final Values
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {% set navName = navData.name | default(options.name) %}
      {% set items = navData.items | default([]) %}
      {% set ariaLabel = navData.ariaLabel | default('Secondary navigation') %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
        Index:
        3.1 Nav Wrapper Classes
        3.2 List Classes
        3.3 Link Base Override Classes
        3.4 Link Hover Override Classes
        3.5 Link Focus Override Classes
        3.6 Link Current Override Classes
        3.7 Link Disabled Override Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# --------------------------
          3.1 Nav Wrapper Classes
          Description: Layout
        --------------------------#}
      {% set navClasses = "flex" %}

      {# --------------------------
          3.2 List Classes
          Description: Layout vertical, Spacing
        --------------------------#}
      {% set listClasses = "flex flex-col gap-[var(--spacing-1)]" %}

      {# --------------------------
          3.3 Link Base Override Classes
          Description: Typography, Colors, Effects
        --------------------------#}
      {% set linkBaseClasses = "[&_a]:typography-body-regular [&_a]:text-[var(--color-global-default)] [&_a]:no-underline [&_a]:transition-colors" %}

      {# --------------------------
          3.4 Link Hover Override Classes
          Description: Pseudo-element bullet point
        --------------------------#}
      {% set linkHoverClasses = "[&_a:hover]:text-[var(--color-global-contrast-light-02)] [&_a:hover]:before:content-['•'] [&_a:hover]:before:mr-[var(--spacing-2)]" %}

      {# --------------------------
          3.5 Link Focus Override Classes
          Description: Outline, Spacing, Borders
        --------------------------#}
      {% set linkFocusClasses = "[&_a:focus]:outline [&_a:focus]:outline-2 [&_a:focus]:outline-[var(--color-semantic-information-focus)] [&_a:focus]:rounded-[var(--radius-default)] [&_a:focus]:px-[var(--spacing-3)] [&_a:focus]:py-[var(--spacing-2)]" %}

      {# --------------------------
          3.6 Link Current Override Classes
          Description: Positioning, Colors, Pseudo-element bar, States
        --------------------------#}
      {% set linkCurrentClasses = "[&_a[aria-current='page']]:relative [&_a[aria-current='page']]:pl-[var(--spacing-4)] [&_a[aria-current='page']]:text-[var(--color-global-contrast-light-02)] [&_a[aria-current='page']]:before:content-[''] [&_a[aria-current='page']]:before:absolute [&_a[aria-current='page']]:before:left-0 [&_a[aria-current='page']]:before:top-1/2 [&_a[aria-current='page']]:before:-translate-y-1/2 [&_a[aria-current='page']]:before:h-4 [&_a[aria-current='page']]:before:w-1 [&_a[aria-current='page']]:before:bg-[var(--color-global-contrast-light-02)] [&_a[aria-current='page']]:before:rounded-[var(--radius-default)] [&_a[aria-current='page']]:cursor-not-allowed" %}

      {# --------------------------
          3.7 Link Disabled Override Classes
          Description: Positioning, Colors, Pseudo-element bar, States
        --------------------------#}
      {% set linkDisabledClasses = "[&_a[aria-disabled='true']]:relative [&_a[aria-disabled='true']]:pl-[var(--spacing-4)] [&_a[aria-disabled='true']]:text-[var(--color-global-contrast-light-02)] [&_a[aria-disabled='true']]:before:content-[''] [&_a[aria-disabled='true']]:before:absolute [&_a[aria-disabled='true']]:before:left-0 [&_a[aria-disabled='true']]:before:top-0 [&_a[aria-disabled='true']]:before:h-full [&_a[aria-disabled='true']]:before:w-1 [&_a[aria-disabled='true']]:before:bg-[var(--color-global-contrast-light-02)] [&_a[aria-disabled='true']]:before:rounded-[var(--radius-default)] [&_a[aria-disabled='true']]:cursor-not-allowed [&_a[aria-disabled='true']]:pointer-events-none" %}

      {# --------------------------
    3.8 List Item Classes
    Description: Layout, Alignment
  --------------------------#}
{% set listItemClasses = "flex items-center" %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        4. Render HTML
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      <nav
        class="{{ navClasses }}"
        aria-label="{{ ariaLabel }}"
        data-nav-name="{{ navName }}"
        data-nav-type="navigation-secondary"
      >
        <ul
          class="{{ listClasses }} {{ linkBaseClasses }} {{ linkHoverClasses }} {{ linkFocusClasses }} {{ linkCurrentClasses }} {{ linkDisabledClasses }}"
          data-nav-list
        >
          {% for item in items %}
            <li
              class="{{ listItemClasses }}"
              data-nav-item
            >
              {{ renderLink({
                  name: item.linkName,
                  datas: options.linkDatas,
                  iconDatas: options.iconDatas,
                  active: item.active,
                  disabled: item.disabled
              }) }}
            </li>
          {% endfor %}
        </ul>
      </nav>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
