{# ┌─────────────────────────────────────────────────────────┐
   │ ORGANISM › Section Accessibility                        │
   │ Accessibility statement section with semantic markup    │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Section identifier
    - options.datas (array): Section configuration data
    - options.headingDatas (array): Heading atom data

  Usage — Summon HAT Components Wisely:
    {% from "03-organisms/section-accessibility.njk" import renderSectionAccessibility %}

    {{ renderSectionAccessibility({
        name: "demoSectA1",
        datas: organisms["section-accessibility"].sectionsA11y,
        headingDatas: atoms.heading.headings
    }) }}

  @created 2025-01-15
#}

{% macro renderSectionAccessibility(options) %}
  {# Import sub-component #}
  {% from "01-atoms/heading.njk" import renderHeading %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find section using universal filter #}
    {% set sectionData = options.datas | findByName(options.name) %}

    {# Render section or error message #}
    {% if not sectionData %}
      <span class="error" role="alert">Section not found: {{ options.name }}</span>
    {% else %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        2. Compute Final Values
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {% set sectionName = sectionData.name | default(options.name) %}
      {% set variant = sectionData.variant | default('default') %}
      {% set headingName = sectionData.headingName | default('') %}
      {% set content = sectionData.content | default('') %}
      {% set ariaLabel = sectionData.ariaLabel | default('Accessibility section') %}
      {% set role = sectionData.role | default('region') %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
        Index:
        3.1 Section Wrapper Classes
        3.2 Content Wrapper Classes
        3.3 Heading Wrapper Classes
        3.4 Content Text Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# --------------------------
          3.1 Section Wrapper Classes
          Description: Layout, Spacing, Background
        --------------------------#}
      {% set sectionClasses = "flex flex-col px-[var(--spacing-inset-medium)] py-[var(--spacing-inset-large)] bg-[var(--color-global-white)] md:px-[var(--spacing-inset-xlarge)] md:py-[var(--spacing-inset-xxlarge)]" %}

      {# --------------------------
          3.2 Content Wrapper Classes
          Description: Layout, Sizing max-width centered desktop, Spacing
        --------------------------#}
      {% set containerClasses = "flex flex-col gap-[var(--spacing-stack-medium)] w-full md:max-w-[var(--column-width-640)] md:mx-auto" %}

      {# --------------------------
          3.3 Heading Wrapper Classes
          Description: Layout, Typography override serif
      --------------------------#}
      {% set headingClasses = "flex [&_h1]:typography-h1-serif [&_h2]:typography-h2-serif [&_h3]:typography-h3-serif" %}

      {# --------------------------
          3.4 Content Text Classes
          Description: Typography, Colors
        --------------------------#}
      {% set contentClasses = "typography-body-regular text-[var(--color-global-default)]" %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        4. Render HTML
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {# WCAG 2.2 AA: Accessibility statements should be in a region landmark #}
      {# Source: https://www.w3.org/WAI/WCAG22/Understanding/parsing.html #}
      <section
        class="{{ sectionClasses }}"
        role="{{ role }}"
        aria-label="{{ ariaLabel }}"
        data-section-name="{{ sectionName }}"
        data-section-type="section-accessibility"
        data-section-variant="{{ variant }}"
      >

        <div
          class="{{ containerClasses }}"
          data-section-container
        >

          {# Section heading #}
          {% if headingName %}
            <div
              class="{{ headingClasses }}"
              data-section-heading
            >
              {{ renderHeading({
                  name: headingName,
                  datas: options.headingDatas
              }) }}
            </div>
          {% endif %}

          {# Section content #}
          {% if content %}
            <div
              class="{{ contentClasses }}"
              data-section-content
            >
              <p>{{ content }}</p>
            </div>
          {% endif %}

        </div>

      </section>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
