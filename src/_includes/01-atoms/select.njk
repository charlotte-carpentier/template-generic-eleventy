{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Select                                           │
   │ Dropdown elements with consistent styling               │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Select identifier
    - options.datas (object): Select configuration data
  
  Usage:
    {% from "01-atoms/select.njk" import renderSelect %}
    
    {{ renderSelect({ name: "categories", datas: atoms.selects }) }}
  
  Features:
    - Variant-based styling
    - Custom dropdown arrow icon
    - Selected option support
    - Disabled state handling
  
  @created 2025-01-15
#}

{% macro renderSelect(options) %}
  {# Initialize selectData as null before searching #}
  {% set selectData = null %}
  
  {# Find the select matching the requested name in the data collection #}
  {% for select in options.datas.selects %}
    {% if select.name == options.name %}
      {% set selectData = select %}
    {% endif %}
  {% endfor %}

  {# Get global style that applies to all selects #}
  {% set globalStyle = options.datas.globalStyle %}

  {# Render select if data was found #}
  {% if selectData %}
    {# Get variant-specific style or default to empty string if not found #}
    {% set variantStyle = options.datas.variants[selectData.variant] | default('') %}
    
    <div>
      <select 
        name="{{ selectData.name }}" 
        class="{{ globalStyle }} {{ variantStyle }}"
        {% if selectData.variant == 'disabled' %}disabled{% endif %}
      >
        {# Render all options from the select data #}
        {% for opt in selectData.options %}
          <option 
            value="{{ opt.value }}"
            {% if opt.selected %} selected{% endif %}
          >
            {{ opt.label }}
          </option>
        {% endfor %}
      </select>
      {# Add dropdown arrow icon #}
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
        </svg>
      </div>
    </div>
  {% else %}
    {# Display error message if select not found #}
    <span>Select not found: {{ options.name }}</span>
  {% endif %}
{% endmacro %}

{#
============================
Summon HAT Components Wisely
============================

Adding a new select to selects.json:
{
  "selects": [
    {
      "name": "new_select_name",
      "variant": "default",
      "options": [
        { "value": "option1", "label": "Option 1" },
        { "value": "option2", "label": "Option 2", "selected": true }
      ]
    }
  ]
}

May your bugs be forever exiled to the shadow realm. ✦
#}