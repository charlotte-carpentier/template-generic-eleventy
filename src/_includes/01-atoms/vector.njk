{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Vector                                           │
   │ Vector images with consistent styling                   │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Usage — Summon HAT Components Wisely:
    {% from "01-atoms/vector.njk" import renderVector %}

    By name (from vectors.json):
    {{ renderVector({ name: "logo_full", datas: atoms.vectors }) }}

    Direct creation:
    {{ renderVector({
        src: "/assets/logos/custom.svg",
        alt: "Custom Logo",
        size: "large",
        datas: atoms.vectors
    }) }}

  Props:
    - options.name (string): Vector identifier (optional)
    - options.datas (object): Vector configuration data
    - options.src (string): Direct src path (when name not provided)
    - options.alt (string): Alt text (when name not provided)
    - options.size (string): Size variant (when name not provided)

  Features:
    - Two rendering modes: named (from data) or direct (custom)
    - Size-based styling from configuration
    - Global style application
    - Fallback to default alt text

  @created 2025-01-15
#}

{% macro renderVector(options) %}
  {# Initialize vectorData as null before searching #}
  {% set vectorData = null %}

  {# If a name is provided, find the vector in the data collection #}
  {% if options.name %}
    {% for vector in options.datas.vectors %}
      {% if vector.name == options.name %}
        {% set vectorData = vector %}
      {% endif %}
    {% endfor %}

    {# Get global style that applies to all vectors #}
    {% set globalStyle = options.datas.globalStyle %}

    {# Render vector if data was found #}
    {% if vectorData %}
      {# Get size-specific style or default to empty string if not found #}
      {% set sizeStyle = options
        .datas
        .sizes[vectorData.size] | default('') %}

      <img src="{{ vectorData.src }}" alt="{{ vectorData.alt }}" class="{{ globalStyle }} {{ sizeStyle }}"/>
    {% else %}
      {# Display error message if vector not found #}
      <span>Vector not found:
        {{ options.name }}</span>
    {% endif %}
  {% else %}
    {# Direct vector creation path when name is not provided #}
    {% set globalStyle = options.datas.globalStyle %}
    {% set sizeStyle = options
      .datas
      .sizes[options.size] | default('') %}

    <img src="{{ options.src }}" alt="{{ options.alt | default('Logo') }}" class="{{ globalStyle }} {{ sizeStyle }}"/>
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}