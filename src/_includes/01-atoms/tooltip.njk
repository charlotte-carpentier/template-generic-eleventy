{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Tooltip                                          │
   │ Contextual information with title and description       │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - option.name (string): Tooltip identifier
    - option.datas (array): Tooltip configuration data
  
  Usage:
    {% from "01-atoms/tooltip.njk" import renderTooltip %}
    
    {{ renderTooltip({ 
        name: "escrime",
        datas: atoms.tooltip.tooltips
    }) }}
  
  Features:
    - Title with heading role
    - Split description (optional part1 and part2)
    - Decorative bar with diamond separator
    - Always visible for atom display
  
  Accessibility:
    - role="tooltip" for semantic meaning
    - aria-live="polite" for dynamic updates
    - role="heading" with aria-level for title
    - aria-hidden for decorative elements
  
  @created 2025-01-15
#}

{% macro renderTooltip(option) %}
  {# Check if datas is provided #}
  {% if not option.datas %}
    <span>Error: No tooltip configuration provided</span>
  {% else %}
    {# Retrieve tooltip configuration #}
    {% set tooltipsConfig = option.datas %}
    {% set tooltipName = option.name %}
    
    {# Find the specific tooltip by name #}
    {% set tooltipData = null %}
    {% for tooltip in tooltipsConfig %}
      {% if tooltip.name == tooltipName %}
        {% set tooltipData = tooltip %}
      {% endif %}
    {% endfor %}

    {# Fallback if tooltip not found #}
    {% if not tooltipData %}
      <span>Tooltip not found: {{ tooltipName }}</span>
    {% else %}
      {# Tooltip - always visible for atom display #}
      <div class="" role="tooltip" aria-live="polite">
        {# Title #}
        <div class="" role="heading" aria-level="3">{{ tooltipData.title }}</div>
        
        {# Description part 1 (above bar) #}
        {% if tooltipData.description_part1 %}
          <div class="">{{ tooltipData.description_part1 }}</div>
        {% endif %}
        
        {# Decorative bar with diamond #}
        <div aria-hidden="true">
          <div class=""></div>
          <div class=""></div>
          <div class=""></div>
        </div>
        
        {# Description part 2 (below bar) or regular description #}
        <div class="">
          {% if tooltipData.description_part2 %}
            {{ tooltipData.description_part2 }}
          {% else %}
            {{ tooltipData.description }}
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
============================
Summon HAT Components Wisely
============================

May your bugs be forever exiled to the shadow realm. ✦
#}