{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Tooltip                                          │
   │ Contextual information with title and description       │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Tooltip identifier
    - options.datas (array): Tooltip configuration data

  Usage — Summon HAT Components Wisely:
    {% from "01-atoms/tooltip.njk" import renderTooltip %}

    {{ renderTooltip({
        name: "demoTooltip1",
        datas: atoms.tooltip.tooltips
    }) }}

  @created 2025-01-15
#}

{% macro renderTooltip(options) %}
  {# Validate required props #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find tooltip using universal filter #}
    {% set tooltipData = options.datas | findByName(options.name) %}

    {# Render tooltip or error message #}
    {% if not tooltipData %}
      <span class="error" role="alert">Tooltip not found: {{ options.name }}</span>
    {% else %}
      {# Render tooltip element #}
      <div
        data-tooltip-name="{{ tooltipData.name }}"
        data-tooltip-type="tooltip"
        role="tooltip"
        aria-live="polite"
      >
        {# Title #}
        <div role="heading" aria-level="3">
          {{ tooltipData.title }}
        </div>

        {# Description part 1 (above bar) #}
        {% if tooltipData.descriptionPart1 %}
          <div>{{ tooltipData.descriptionPart1 }}</div>
        {% endif %}

        {# Decorative bar with diamond #}
        <div data-tooltip-separator aria-hidden="true">
          <div data-separator-line></div>
          <div data-separator-diamond></div>
          <div data-separator-line></div>
        </div>

        {# Description part 2 (below bar) or regular description #}
        <div>
          {% if tooltipData.descriptionPart2 %}
            {{ tooltipData.descriptionPart2 }}
          {% else %}
            {{ tooltipData.description }}
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
