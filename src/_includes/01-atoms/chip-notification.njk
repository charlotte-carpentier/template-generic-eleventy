{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Chip Notification                                │
   │ Numeric indicators and status badges                    │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Chip identifier
    - options.datas (array): Chip notification configuration

  Usage — Summon HAT Components Wisely:
    {% from "01-atoms/chip-notification.njk" import renderChipNotification %}

    {{ renderChipNotification({
        name: "demoChip1",
        datas: atoms["chip-notification"].chipNotifs
    }) }}

  @created 2025-01-15
#}

{% macro renderChipNotification(options) %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find chip using universal filter #}
    {% set chipData = options.datas | findByName(options.name) %}

    {# Render chip or error message #}
    {% if not chipData %}
      <span class="error" role="alert">Chip notification not found: {{ options.name }}</span>
    {% else %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        2. Compute Final Values
      ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {% set chipVariant = chipData.variant | default('default') %}
      {% set chipContent = chipData.content | default('') %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
        Index:
        3.1 Base Classes
        3.2 Variant Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# --------------------------
          3.1 Base Classes
          Description: Layout, sizing, spacing, typography, borders
      -------------------------- #}
      {% set baseClasses = "inline-flex items-center justify-center min-w-6 min-h-6 px-[var(--spacing-inset-tight)] text-xs font-semibold text-white rounded-[var(--radius-pill)]" %}

      {# --------------------------
          3.2 Variant Classes
          Description: Background colors
      --------------------------- #}
      {% set variantMap = {
        'stepper': 'bg-[var(--color-button-primary)]',
        'default': 'bg-[var(--color-semantic-critical)]'
      } %}
      {% set variantClasses = variantMap[chipVariant] or variantMap['default'] %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        4. Render HTML
      ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      <span
        role="status"
        class="{{ baseClasses }} {{ variantClasses }}"
        data-chip-notification-name="{{ chipData.name }}"
        data-chip-notification-type="chip-notification"
        {% if chipData.variant %}data-chip-notification-variant="{{ chipData.variant }}"{% endif %}
        {% if chipData.ariaLabel %}aria-label="{{ chipData.ariaLabel }}"{% endif %}
      >
        {{ chipContent }}
      </span>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
