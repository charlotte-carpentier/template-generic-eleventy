{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Chip Notification                                │
   │ Numeric indicators and status badges                    │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Chip identifier
    - options.datas (array): Chip notification configuration

  Usage — Summon HAT Components Wisely:
    {% from "01-atoms/chip-notification.njk" import renderChipNotification %}

    {{ renderChipNotification({
        name: "demoChip1",
        datas: atoms["chip-notification"].chipNotifs
    }) }}

  @created 2025-01-15
#}

{% macro renderChipNotification(options) %}
  {# Validate required props #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find chip using universal filter #}
    {% set chipData = options.datas | findByName(options.name) %}

    {# Render chip or error message #}
    {% if not chipData %}
      <span class="error" role="alert">Chip notification not found: {{ options.name }}</span>
    {% else %}
      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
         CSS Classes - Tailwind Utilities
      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# Base classes - Common to all chip notifications
         Circular badge with centered content, minimum size for readability #}
      {% set baseClasses = "inline-flex items-center justify-center min-w-6 min-h-6 px-1.5 text-xs font-semibold text-white rounded-[var(--radius-pill)]" %}

      {# Variant classes - Visual style per usage context #}
      {% set variantClasses = "" %}

      {% if chipData.variant == 'stepper' %}
        {# Stepper variant - Sequential step indicator (brand color) #}
        {% set variantClasses = "bg-[var(--color-button-primary)]" %}
      {% else %}
        {# Default variant - Notification badge (critical red) #}
        {% set variantClasses = "bg-[var(--color-semantic-critical-40)]" %}
      {% endif %}

      {# Render chip element #}
      <span
        role="status"
        class="{{ baseClasses }} {{ variantClasses }}"
        data-chip-notification-name="{{ chipData.name }}"
        data-chip-notification-type="chip-notification"
        {% if chipData.variant %}data-chip-notification-variant="{{ chipData.variant }}"{% endif %}
        {% if chipData.ariaLabel %}aria-label="{{ chipData.ariaLabel }}"{% endif %}
      >
        {# Content will be injected dynamically via JavaScript #}
      </span>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
