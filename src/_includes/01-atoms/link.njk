{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Link                                             │
   │ Navigation links with semantic attributes               │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Link identifier
    - options.datas (array): Link configuration data
    - options.ariaLabel (string): Override aria-label
    - options.disabled (boolean): Override disabled state

  Usage — Summon HAT Components Wisely:
    {% from "01-atoms/link.njk" import renderLink %}

    {{ renderLink({
        name: "demoLink1",
        datas: atoms.link.links
    }) }}

  @created 2025-01-15
#}

{% macro renderLink(options) %}
  {# Validate required props #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find link using universal filter #}
    {% set linkData = options.datas | findByName(options.name) %}

    {# Render link or error message #}
    {% if not linkData %}
      <span class="error" role="alert">Link not found: {{ options.name }}</span>
    {% else %}
      {# Compute final aria-label with fallback cascade #}
      {% set finalAriaLabel = options.ariaLabel | default(linkData.ariaLabel) %}

      {# Render link element #}
      <a
        href="{{ linkData.href }}"
        data-link-name="{{ linkData.name }}"
        data-link-type="link"
        data-link-variant="{{ linkData.variant }}"
        {% if linkData.target %}target="{{ linkData.target }}"{% endif %}
        {% if linkData.rel %}rel="{{ linkData.rel }}"{% endif %}
        {% if linkData.download %}download{% endif %}
        {% if linkData.onclick %}onclick="{{ linkData.onclick | escape }}"{% endif %}
        {% if finalAriaLabel %}aria-label="{{ finalAriaLabel }}"{% endif %}
      >
        {# TODO: Add icon rendering if iconName exists in linkData #}
        {# {% if linkData.iconName %} #}
        {#   {{ renderIcon({ name: linkData.iconName }) }} #}
        {# {% endif %} #}

        {{ linkData.text }}
      </a>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
