{# ┌─────────────────────────────────────────────────────────┐
   │ ATOM › Radio Button                                     │
   │ Radio inputs with label and description support         │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.id (string): Radio button identifier
    - options.datas (object): Radio button configuration data

  Usage — Summon HAT Components Wisely:
    {% from "01-atoms/radio-button.njk" import renderRadioButton %}

    {{ renderRadioButton({
        id: "demoRadio1",
        datas: atoms["radio-button"].radioButtons
    }) }}

  @created 2025-01-15
#}

{% macro renderRadioButton(options) %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.id %}
    <span class="error" role="alert">Error: Missing required prop (id)</span>
  {% else %}
    {# Find radio button using universal filter #}
    {% set radioButtonData = options.datas | findByName(options.id) %}

    {% if not radioButtonData %}
      <span class="error" role="alert">Radio button not found: {{ options.id }}</span>
    {% else %}
      {{ renderSingleRadio(radioButtonData) }}
    {% endif %}
  {% endif %}
{% endmacro %}

{% macro renderSingleRadio(radioButton) %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    2. Compute Final Values
  ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% set radioData = radioButton.radio | default({}) %}
  {% set radioValue = radioData.value | default(radioButton.id) %}
  {% set radioName = radioButton.name | default('radio-group') %}
  {% set isChecked = radioData.checked | default(false) %}
  {% set isDisabled = radioData.disabled | default(false) %}
  {% set hasDescription = radioButton.description %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    3. Tailwind Classes
    Index:
    3.1 Label Wrapper Classes
    3.2 Input Wrapper Classes
    3.3 Input Classes
    3.4 Indicator Classes
    3.5 Text Wrapper Classes
    3.6 Label Classes
    3.7 Description Classes
  ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}

  {# --------------------------
      3.1 Label Wrapper Classes
      Description: Layout, spacing, states
  -------------------------- #}
  {% set labelClasses = "inline-flex items-start gap-2 cursor-pointer group" %}

  {# --------------------------
      3.2 Input Wrapper Classes
      Description: Layout, positioning
  -------------------------- #}
  {% set radioWrapperClasses = "relative flex items-start" %}

  {# --------------------------
      3.3 Input Classes
      Description: Positioning, sizing, borders, colors, effects, states
  -------------------------- #}
  {% set radioClasses = "relative appearance-none w-5 h-5 border border-[var(--color-form)] rounded-full bg-white cursor-pointer transition-all focus:outline-none focus:ring-2 focus:ring-[var(--color-semantic-information-focus)] hover:border-[var(--color-form-hover)] checked:border-[var(--color-form-control-checked)] disabled:opacity-50 disabled:cursor-not-allowed" %}

  {# --------------------------
      3.4 Indicator Classes
      Description: Positioning, sizing, borders, colors, states
  -------------------------- #}
  {% set checkedIndicatorClasses = "checked:after:content-[''] checked:after:absolute checked:after:top-1/2 checked:after:left-1/2 checked:after:-translate-x-1/2 checked:after:-translate-y-1/2 checked:after:w-3 checked:after:h-3 checked:after:rounded-full checked:after:bg-[var(--color-form-control-checked)]" %}

  {# --------------------------
      3.5 Text Wrapper Classes
      Description: Layout
  -------------------------- #}
  {% set textContainerClasses = "flex flex-col" %}

  {# --------------------------
      3.6 Label Classes
      Description: Typography, colors, states
  -------------------------- #}
  {% set labelTextClasses = "text-base text-[var(--color-form)] group-hover:text-[var(--color-form-hover)] select-none transition-colors" %}

  {# --------------------------
      3.7 Description Classes
      Description: Spacing, typography, colors
  -------------------------- #}
  {% set descriptionClasses = "mt-0.5 text-sm text-[var(--color-global-contrast-light-02)]" %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    4. Render HTML
  ━━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  <label for="{{ radioButton.id }}" class="{{ labelClasses }}">
    <div class="{{ radioWrapperClasses }}">
      <input
        type="radio"
        id="{{ radioButton.id }}"
        name="{{ radioName }}"
        value="{{ radioValue }}"
        class="{{ radioClasses }} {{ checkedIndicatorClasses }}"
        data-radio-id="{{ radioButton.id }}"
        data-radio-type="radio-button"
        {% if isChecked %}checked{% endif %}
        {% if isDisabled %}disabled{% endif %}
        {% if radioButton.ariaLabel %}aria-label="{{ radioButton.ariaLabel }}"{% endif %}
        {% if hasDescription %}aria-describedby="{{ radioButton.id }}-description"{% endif %}
      />
    </div>

    {% if radioButton.label or hasDescription %}
      <div class="{{ textContainerClasses }}">
        {% if radioButton.label %}
          <span class="{{ labelTextClasses }}">{{ radioButton.label }}</span>
        {% endif %}

        {% if hasDescription %}
          <p id="{{ radioButton.id }}-description" class="{{ descriptionClasses }}">
            {{ radioButton.description }}
          </p>
        {% endif %}
      </div>
    {% endif %}
  </label>
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
