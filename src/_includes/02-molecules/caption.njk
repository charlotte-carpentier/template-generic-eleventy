{# ┌─────────────────────────────────────────────────────────┐
   │ MOLECULE › Caption                                      │
   │ Contextual labels with semantic icon variants          │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): Caption identifier
    - options.datas (array): Caption configuration data
    - options.iconDatas (array): Icon atom data

  Usage — Summon HAT Components Wisely:
    {% from "02-molecules/caption.njk" import renderCaption %}

    {{ renderCaption({
        name: "demoCaption1",
        datas: molecules.caption.captions,
        iconDatas: atoms.icon.icons
    }) }}

  @created 2025-01-15
#}

{% from "01-atoms/icon.njk" import renderIcon %}

{% macro renderCaption(options) %}
  {# Validate required props #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find caption using universal filter #}
    {% set captionData = options.datas | findByName(options.name) %}

    {# Render or error #}
    {% if not captionData %}
      <span class="error" role="alert">Caption not found: {{ options.name }}</span>
    {% else %}
      <div
        data-caption-name="{{ captionData.name }}"
        data-caption-type="caption"
        data-caption-variant="{{ captionData.variant }}"
      >
        {# Icon #}
        {{ renderIcon({
            name: captionData.iconName,
            datas: options.iconDatas
        }) }}

        {# Text #}
        <span data-caption-text="true">
          {{ captionData.text }}
        </span>
      </div>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
