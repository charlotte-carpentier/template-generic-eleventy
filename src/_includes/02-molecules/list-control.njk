{# ┌─────────────────────────────────────────────────────────┐
   │ MOLECULE › List Control                                 │
   │ Lists with radio, checkbox, and toggle controls        │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Props:
    - options.name (string): List control identifier
    - options.datas (array): List control configuration data
    - options.radioDatas (array): Radio button atom data (if type is "radio")
    - options.checkboxDatas (array): Checkbox atom data (if type is "checkbox")
    - options.toggleDatas (array): Toggle atom data (if type is "toggle")

  Usage — Summon HAT Components Wisely:
    {% from "02-molecules/list-control.njk" import renderListControl %}

    {{ renderListControl({
        name: "demoList1",
        datas: molecules["list-control"].listControls,
        radioDatas: atoms["radio-button"].radioButtons
    }) }}

    {{ renderListControl({
        name: "demoList2",
        datas: molecules["list-control"].listControls,
        checkboxDatas: atoms.checkbox.checkboxes
    }) }}

    {{ renderListControl({
        name: "demoList3",
        datas: molecules["list-control"].listControls,
        toggleDatas: atoms.toggle.toggles
    }) }}

  @created 2025-01-15
#}

{% from "01-atoms/radio-button.njk" import renderRadioButton %}
{% from "01-atoms/checkbox.njk" import renderCheckbox %}
{% from "01-atoms/toggle.njk" import renderToggle %}

{% macro renderListControl(options) %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find list control using universal filter #}
    {% set listData = options.datas | findByName(options.name) %}

    {# Render list control or error message #}
    {% if not listData %}
      <span class="error" role="alert">List control not found: {{ options.name }}</span>
    {% else %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        2. Compute Final Values
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {% set listType = listData.type | default('radio') %}
      {% set items = listData.items | default([]) %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
        Index:
        3.1 Wrapper Classes
        3.2 Item Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# --------------------------
          3.1 Wrapper Classes
          Description: Layout vertical, Spacing
        --------------------------#}
      {% set containerClasses = "flex flex-col gap-[var(--spacing-stack-medium)]" %}

      {# --------------------------
          3.2 Item Classes
          Description: Layout
        --------------------------#}
      {% set itemClasses = "" %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        4. Render HTML
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      <div
        class="{{ containerClasses }}"
        data-list-control-name="{{ listData.name }}"
        data-list-control-type="{{ listType }}"
      >
        {% for item in items %}
          <div
            class="{{ itemClasses }}"
            data-list-control-item="true"
          >
            {# Render based on list type #}
            {% if listType == "radio" %}
              {{ renderRadioButton({
                  id: item.radioName,
                  datas: options.radioDatas,
                  checked: item.checked
              }) }}

            {% elif listType == "checkbox" %}
              {{ renderCheckbox({
                  id: item.checkboxName,
                  datas: options.checkboxDatas,
                  checked: item.checked
              }) }}

            {% elif listType == "toggle" %}
              {{ renderToggle({
                  id: item.toggleName,
                  datas: options.toggleDatas,
                  checked: item.checked
              }) }}
            {% endif %}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
