{# ┌─────────────────────────────────────────────────────────┐
   │ MOLECULE › List Content                                 │
   │ Organized list of lockup components                     │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Usage — Summon HAT Components Wisely:
    {% from "02-molecules/list-content.njk" import renderListContent %}
    
    {{ renderListContent({ 
        name: "forgotten_legends",
        datas: molecules.list_contents,
        lockups: molecules.lockups,
        images: atoms.images,
        headings: atoms.headings
    }) }}
    
    With custom styles:
    {{ renderListContent({ 
        name: "mystical_artifacts",
        datas: molecules.list_contents,
        lockups: molecules.lockups,
        images: atoms.images,
        headings: atoms.headings,
        class: "my-custom-list-class"
    }) }}
  
  Props:
    - options.name (string): List content identifier
    - options.datas (object): List content configuration
    - options.lockups (object): Lockups molecule data
    - options.images (object): Images atom data
    - options.headings (object): Headings atom data
    - options.class (string): Additional CSS classes
  
  Features:
    - Style variants for list appearance
    - Item-specific styling
    - Integrates with lockup molecule
    - Falls back to first list if name not found
  
  @created 2025-01-15
#}

{% macro renderListContent(options) %}
  {% if options.datas %}
    {% set globalStyle = options.datas.globalStyle %}
    {% set itemStyle = options.datas.itemStyle.default %}
    
    {% set listContentData = null %}
    {% if options.name %}
      {% for listSet in options.datas.list_contents %}
        {% if listSet.name == options.name %}
          {% set listContentData = listSet %}
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if not listContentData %}
      {% set listContentData = options.datas.list_contents[0] %}
    {% endif %}
    
    {% set listVariant = options.datas.variants[listContentData.style | default('default')] %}
    {% if listContentData.itemStyle %}
      {% set itemStyle = options.datas.itemStyle[listContentData.itemStyle] %}
    {% endif %}
    
    <div class="{{ globalStyle }} {{ listVariant }} {{ options.class | default('') }}">
      {% for item in listContentData.items %}
        <div class="{{ itemStyle }}">
          {% if options.lockups %}
            {% for lockup in options.lockups.lockups %}
              {% if lockup.name == item.lockupName %}
                {% if lockup.type == "block-content" %}
                  {% from "02-molecules/lockup.njk" import renderLockup %}
                  {{ renderLockup({ 
                    name: item.lockupName,
                    datas: options.lockups,
                    images: options.images,
                    headings: options.headings
                  }) }}
                {% endif %}
              {% endif %}
            {% endfor %}
          {% else %}
            <span>Lockup: {{ item.lockupName }}</span>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <span>List content data not found</span>
  {% endif %}
{% endmacro %}


{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
Charlotte Carpentier · 2025
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}