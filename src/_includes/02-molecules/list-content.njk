{# ┌─────────────────────────────────────────────────────────┐
   │ MOLECULE › List Content                                 │
   │ Content lists with lockup items                         │
   └─────────────────────────────────────────────────────────┘ #}

{#
  Usage — Summon HAT Components Wisely:
    {% from "02-molecules/list-content.njk" import renderListContent %}

    {{ renderListContent({
        name: "demoList1",
        datas: molecules["list-content"].listContents,
        lockupDatas: molecules["lock-up"].lockUps,
        imageDatas: atoms.image.images,
        headingDatas: atoms.heading.headings,
        iconDatas: atoms.icon.icons
    }) }}

  @created 2025-09-15
#}

{% from "02-molecules/lock-up.njk" import renderLockup %}

{% macro renderListContent(options) %}

  {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
    1. Validate Props
  ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
  {% if not options.datas %}
    <span class="error" role="alert">Error: Missing required prop (datas)</span>
  {% elif not options.name %}
    <span class="error" role="alert">Error: Missing required prop (name)</span>
  {% else %}
    {# Find list content using universal filter #}
    {% set listData = options.datas | findByName(options.name) %}

    {# Render list content or error message #}
    {% if not listData %}
      <span class="error" role="alert">List content not found: {{ options.name }}</span>
    {% else %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        2. Compute Final Values
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      {% set items = listData.items | default([]) %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        3. Tailwind Classes
        Index:
        3.1 Wrapper Classes
        3.2 Item Classes
        3.3 Lockup Override Classes
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}

      {# --------------------------
          3.1 Wrapper Classes
          Description: Layout vertical, Spacing
        --------------------------#}
      {% set containerClasses = "flex flex-col gap-[var(--spacing-ui-comfortable)]" %}

      {# --------------------------
          3.2 Item Classes
          Description: Layout
        --------------------------#}
      {% set itemClasses = "w-full" %}

      {# --------------------------
          3.3 Lockup Override Classes
          Description: Image sizing override for list display
        --------------------------#}
      {% set lockupOverrideClasses = "[&_[data-lockup-image]]:w-52 [&_[data-lockup-image]]:h-52 [&_img]:w-full [&_img]:h-full [&_img]:object-cover" %}

      {# ━━━━━━━━━━━━━━━━━━━━━━━━━━
        4. Render HTML
      ━━━━━━━━━━━━━━━━━━━━━━━━━ #}
      <div
        class="{{ containerClasses }}"
        data-list-content-name="{{ listData.name }}"
        data-list-content-type="list-content"
      >
        {% for item in items %}
          <div
            class="{{ itemClasses }} {{ lockupOverrideClasses }}"
            data-list-content-item="true"
          >
            {# Render lockup #}
            {{ renderLockup({
                name: item.lockupName,
                datas: options.lockupDatas,
                imageDatas: options.imageDatas,
                headingDatas: options.headingDatas,
                iconDatas: options.iconDatas
            }) }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endif %}
{% endmacro %}

{#
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
May your bugs be forever exiled to the shadow realm ✦
HAT · 2026
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#}
