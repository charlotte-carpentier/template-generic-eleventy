{# ===========================================================
   @ORGANISMS - HOME-LAYOUT
   - Main page layout orchestrating avatar, skills and tab-sections
   - Enhanced with semantic HTML and accessibility improvements
=========================================================== #}

{# Import organisms #}
{% from "01-organisms/avatar-card.njk" import renderAvatarCard %}
{% from "01-organisms/skills-card.njk" import renderSkillsCard %}
{% from "01-organisms/tab-sections.njk" import renderTabSections %}

{% macro renderHomeLayout(option) %}
  {# Check if required data is provided #}
  {% if not option.avatar_datas or not option.skills_datas or not option.tab_sections_datas %}
    <span class="text-red-500">Error: Missing required configuration data</span>
  {% else %}

    {# Home Layout Container - Parent for all breakpoints #}
    <main class="home-layout w-full" data-component="home-layout" role="main">

      {# ===================================================================
         SM LAYOUT - Mobile First (640px and below) ✅ VALIDÉ
         Structure: Avatar → Skills → Tab-sections (skills hidden by default)
         =================================================================== #}
      <div class="home-layout__sm block sm:hidden min-h-0 h-auto" data-breakpoint="sm" aria-hidden="false">

        {# Avatar Section #}
        <section class="home-layout__avatar mb-4 h-auto pt-8" aria-label="Avatar">
          {{ renderAvatarCard({ 
            name: option.avatar_name or "charlotte_main",
            datas: option.avatar_datas,
            image_datas: option.image_datas,
            typography_datas: option.typography_datas,
            button_datas: option.button_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </section>

        {# Skills Cards - Now directly after avatar for better UX flow #}
        <section class="home-layout__skills h-auto min-h-0 mb-4" aria-label="Compétences">
          {{ renderSkillsCard({ 
            name: "languages_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}

          {{ renderSkillsCard({ 
            name: "hard_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}

          {{ renderSkillsCard({ 
            name: "soft_skills_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}

          {{ renderSkillsCard({ 
            name: "interests_card",
            datas: option.skills_datas,
            typography_datas: option.typography_datas,
            caption_datas: option.caption_datas,
            icon_datas: option.icon_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </section>

        {# Tab Sections - Pushed down naturally when skills appear #}
        <section class="home-layout__tabs h-auto pb-8" aria-label="Contenu principal">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </section>

      </div>

      {# ===================================================================
         MD LAYOUT - Tablet (640px to 1023px) ✅ VALIDÉ - CSS INLINE SUPPRIMÉ
         Structure: Avatar → Tab-sections → Skills (toujours visible)
         =================================================================== #}
      <div class="home-layout__md hidden sm:block lg:hidden min-h-0 h-auto" data-breakpoint="md" aria-hidden="true">

        {# Avatar Section #}
        <section class="home-layout__avatar mb-4 h-auto pt-8" aria-label="Avatar">
          {{ renderAvatarCard({ 
            name: option.avatar_name or "charlotte_main",
            datas: option.avatar_datas,
            image_datas: option.image_datas,
            typography_datas: option.typography_datas,
            button_datas: option.button_datas,
            tooltip_datas: option.tooltip_datas
          }) }}
        </section>

        {# Tab Sections #}
        <section class="home-layout__tabs h-auto mb-4 w-full" aria-label="Contenu principal">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </section>

        {# Skills Cards - Toujours visible avec wrapper complet #}
        <section class="home-layout__skills h-auto min-h-0 pb-8" aria-label="Compétences">
          <div class="skills-wrapper">
            {{ renderSkillsCard({ 
              name: "hard_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}

            {{ renderSkillsCard({ 
              name: "soft_skills_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}

            {{ renderSkillsCard({ 
              name: "languages_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}

            {{ renderSkillsCard({ 
              name: "interests_card",
              datas: option.skills_datas,
              typography_datas: option.typography_datas,
              caption_datas: option.caption_datas,
              icon_datas: option.icon_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </div>
        </section>

      </div>

      {# ===================================================================
         LG LAYOUT - Desktop Large (1024px to 1279px)
         Structure: Skills avec Avatar superposé + Tab-sections en dessous
         =================================================================== #}
      <div class="home-layout__lg hidden lg:block xl:hidden min-h-0 h-auto" data-breakpoint="lg" aria-hidden="true">

        {# Skills + Avatar Container - Renommé pour plus de clarté #}
        <div class="home-layout__skills-container relative flex justify-center items-center h-auto pt-8 pb-4">

          {# Skills Cards Container - Zone centrale qui recevra l'avatar par dessus #}
          <section class="home-layout__skills relative" aria-label="Compétences">
            <div class="skills-wrapper">
              {{ renderSkillsCard({ 
                name: "languages_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}

              {{ renderSkillsCard({ 
                name: "soft_skills_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}

              {{ renderSkillsCard({ 
                name: "hard_skills_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}

              {{ renderSkillsCard({ 
                name: "interests_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}
            </div>
          </section>

          {# Avatar Card - Superposé au centre du bloc skills #}
          <section class="home-layout__avatar absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[45.5%] z-10 pointer-events-none" aria-label="Avatar">
            {{ renderAvatarCard({ 
              name: option.avatar_name or "charlotte_name",
              datas: option.avatar_datas,
              image_datas: option.image_datas,
              typography_datas: option.typography_datas,
              button_datas: option.button_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </section>

        </div>

        {# Tab Sections #}
        <section class="home-layout__tabs h-auto pb-8" aria-label="Contenu principal">
          <div class="lg-tab-sections-wrapper">
            {{ renderTabSections({ 
              name: option.tab_sections_name or "charlotte_main",
              datas: option.tab_sections_datas,
              tabMenuDatas: option.tab_menu_datas,
              linkDatas: option.link_datas,
              portfolioDatas: option.portfolio_datas,
              timelineDatas: option.timeline_datas,
              contactDatas: option.contact_datas,
              typographyDatas: option.typography_datas,
              contentBlockDatas: option.content_block_datas,
              contactBlockDatas: option.contact_block_datas,
              listFormDatas: option.list_form_datas,
              progressBarDatas: option.progress_bar_datas,
              imageDatas: option.image_datas,
              iconDatas: option.icon_datas,
              radioDatas: option.radio_datas,
              inputDatas: option.input_datas,
              buttonDatas: option.button_datas
            }) }}
          </div>
        </section>

      </div>

      {# ===================================================================
         XL LAYOUT - Large Desktop (1280px and above) ✅ CORRIGÉ
         Structure: Flexbox 2 colonnes - Tab-sections (30%) + Skills/Avatar (70%)
         =================================================================== #}
      <div class="home-layout__xl hidden xl:flex xl:w-full xl:gap-8 xl:h-fit xl:max-h-[800px] xl:py-8 xl:justify-center" data-breakpoint="xl" aria-hidden="true">

        {# Tab-sections (30%) - Prend 30% de l'espace disponible #}
        <section class="home-layout__tabs xl:w-fit xl:flex-shrink-0 xl:min-w-0 xl:max-h-[800px] xl:overflow-hidden" aria-label="Contenu principal">
          {{ renderTabSections({ 
            name: option.tab_sections_name or "charlotte_main",
            datas: option.tab_sections_datas,
            tabMenuDatas: option.tab_menu_datas,
            linkDatas: option.link_datas,
            portfolioDatas: option.portfolio_datas,
            timelineDatas: option.timeline_datas,
            contactDatas: option.contact_datas,
            typographyDatas: option.typography_datas,
            contentBlockDatas: option.content_block_datas,
            contactBlockDatas: option.contact_block_datas,
            listFormDatas: option.list_form_datas,
            progressBarDatas: option.progress_bar_datas,
            imageDatas: option.image_datas,
            iconDatas: option.icon_datas,
            radioDatas: option.radio_datas,
            inputDatas: option.input_datas,
            buttonDatas: option.button_datas
          }) }}
        </section>

        {# Skills + Avatar Container - Même structure que LG #}
        <div class="home-layout__skills-container relative flex justify-center items-center h-auto pb-4">

          {# Skills Cards Container - Zone centrale qui recevra l'avatar par dessus #}
          <section class="home-layout__skills relative" aria-label="Compétences">
            <div class="skills-wrapper">
              {{ renderSkillsCard({ 
                name: "languages_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}

              {{ renderSkillsCard({ 
                name: "soft_skills_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}

              {{ renderSkillsCard({ 
                name: "hard_skills_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}

              {{ renderSkillsCard({ 
                name: "interests_card",
                datas: option.skills_datas,
                typography_datas: option.typography_datas,
                caption_datas: option.caption_datas,
                icon_datas: option.icon_datas,
                tooltip_datas: option.tooltip_datas
              }) }}
            </div>
          </section>

          {# Avatar Card - Superposé au centre du bloc skills #}
          <section class="home-layout__avatar absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[47.7%] z-10 pointer-events-none" aria-label="Avatar">
            {{ renderAvatarCard({ 
              name: option.avatar_name or "charlotte_name",
              datas: option.avatar_datas,
              image_datas: option.image_datas,
              typography_datas: option.typography_datas,
              button_datas: option.button_datas,
              tooltip_datas: option.tooltip_datas
            }) }}
          </section>

        </div>

      </div>

    </main>

  {% endif %}
{% endmacro %}

{# ===========================================================
   Summon HAT Components Wisely
-----------------------------------------------------------
1. Import the macro at the top of your page
{% from "01-organisms/home-layout.njk" import renderHomeLayout %}

2. Call the home layout
{{ renderHomeLayout({ 
    avatar_name: "charlotte_main",
    tab_sections_name: "charlotte_main",
    avatar_datas: organisms.avatar_card.avatar_cards,
    skills_datas: organisms.skills_card.skills_cards,
    tab_sections_datas: organisms.tab_sections.tab_sections,
    tab_menu_datas: molecules["tab-menu"].tab_menus,
    image_datas: atoms.image.images,
    typography_datas: atoms.typography.texts,
    button_datas: atoms.button.buttons,
    tooltip_datas: atoms.tooltip.tooltips,
    caption_datas: molecules.caption.captions,
    icon_datas: atoms.icon.icons,
    link_datas: atoms.link.links,
    portfolio_datas: organisms.section_portfolio.section_portfolios,
    timeline_datas: organisms.section_timeline.section_timelines,
    contact_datas: organisms.section_contact.section_contacts,
    content_block_datas: molecules.content_block.content_blocks,
    contact_block_datas: molecules.contact_block.contact_blocks,
    list_form_datas: molecules.list_form.list_forms,
    progress_bar_datas: molecules.progress_bar.progress_bars,
    radio_datas: atoms.radio.radios,
    input_datas: atoms.input.inputs
}) }}

May your bugs be forever exiled to the shadow realm. 🧙‍♂️✨
=========================================================== #}