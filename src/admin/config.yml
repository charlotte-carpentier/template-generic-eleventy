# ==============================================================================
# DECAP CMS CONFIGURATION
# ==============================================================================

# ------------------------------------------------------------------------------
# Backend & Media
# ------------------------------------------------------------------------------
backend:
  name: git-gateway
  branch: main

media_folder: "src/assets/images/uploads"
public_folder: "/assets/images/uploads"

# Editorial workflow: uncomment to enable draft/review/publish
# publish_mode: editorial_workflow

# ------------------------------------------------------------------------------
# Collections
# ------------------------------------------------------------------------------

collections:
  # ============================================================================
  # ARTICLES
  # ============================================================================
  - name: "articles"
    label: "Articles"
    label_singular: "Article"
    folder: "src/content/articles"
    create: true
    delete: true
    slug: "{{slug}}"
    preview_path: "articles/{{slug}}"
    editor:
      preview: false
    fields:
      - label: "Titre"
        name: "title"
        widget: "string"
        hint: "Important pour le référencement : titre unique de la page (max 60 caractères)."
        pattern: ['^.{1,60}$', "Le titre doit contenir entre 1 et 60 caractères"]

      - label: "Description SEO"
        name: "description"
        widget: "text"
        hint: "Important pour le référencement : affichée dans les résultats de recherche Google (20-160 caractères)."
        pattern: ['^.{20,160}$', "La description doit contenir entre 50 et 160 caractères"]

      - label: "Auteur"
        name: "author"
        widget: "string"
        default: "Charlotte Carpentier"

      - label: "Date de publication"
        name: "date"
        widget: "datetime"
        date_format: "YYYY-MM-DD"
        time_format: false
        format: "YYYY-MM-DD"

      - label: "Image mise en avant"
        name: "image"
        widget: "image"
        hint: "Attention : image trop lourde = site lent. Max 2 Mo recommandé."
        media_library:
          config:
            max_file_size: 2097152

      - label: "Description de l'image (Alt)"
        name: "imageAlt"
        widget: "string"
        hint: "Obligatoire : permet aux personnes malvoyantes de comprendre l'image (max 150 caractères)."
        pattern: ['^.{1,150}$', "Le texte alternatif doit contenir entre 1 et 150 caractères"]

      - label: "Contenu"
        name: "body"
        widget: "markdown"

  # ============================================================================
  # FUTURE COLLECTIONS - Reference
  # ============================================================================
  # Uncomment and adapt for your project needs.
  # ADR-012: Only Tier 1 (editorial) and Tier 2 (validated) content in CMS.
  # Navigation, CTA text, forms stay in code.
  # ============================================================================

  # - name: "site-info"
  #   label: "Informations du site"
  #   files:
  #     - label: "Contact & Réseaux sociaux"
  #       name: "site-info"
  #       file: "src/_data/site-info.json"
  #       fields:
  #         - label: "Contact"
  #           name: "contact"
  #           widget: "object"
  #           fields:
  #             - {label: "Téléphone", name: "phone", widget: "string", required: false}
  #             - {label: "Email", name: "email", widget: "string", required: false}
  #             - {label: "Adresse", name: "address", widget: "text", required: false}
  #
  #         - label: "Réseaux sociaux"
  #           name: "social"
  #           widget: "object"
  #           hint: "Liens affichés dans le footer. Laisser vide pour masquer."
  #           fields:
  #             - {label: "Facebook", name: "facebook", widget: "string", required: false}
  #             - {label: "Instagram", name: "instagram", widget: "string", required: false}
  #             - {label: "LinkedIn", name: "linkedin", widget: "string", required: false}
  #             - {label: "Twitter/X", name: "twitter", widget: "string", required: false}

  # - name: "services"
  #   label: "Services"
  #   folder: "src/content/services"
  #   create: true
  #   delete: true
  #   slug: "{{slug}}"
  #   fields:
  #     - {label: "Nom du service", name: "title", widget: "string"}
  #     - {label: "Description courte", name: "excerpt", widget: "text", pattern: ['^.{1,300}$', "Max 300 caractères"]}
  #     - {label: "Description complète", name: "body", widget: "markdown"}
  #     - {label: "Icône", name: "icon", widget: "string", hint: "Nom de l'icône"}

  # - name: "about"
  #   label: "À propos"
  #   files:
  #     - label: "Page À propos"
  #       name: "about"
  #       file: "src/content/about.md"
  #       fields:
  #         - {label: "Titre", name: "title", widget: "string", pattern: ['^.{1,60}$', "Max 60 caractères"]}
  #         - {label: "Contenu", name: "body", widget: "markdown"}

# ==============================================================================
# Notes
# ==============================================================================
# - Permalink NOT editable (defined in articles.json for security)
# - Use Google Reviews widget for testimonials
# - Manual curation in _data/ for specific service pages
# ==============================================================================
